


    연습문제 Player vs Monster


앞서 알아본 블루프린트 클래스에 대한 내용들을 연습문제로 풀어보겠습니다. 

블루프린트 클래스를 두개 만들어 줄건데 BP_Player, BP_Monster 라고 이름 짓겠습니다. 

BP_Player는 실린더셰이프를 플레이어의 몸이라고 치고 int형 멤버 변수 Hp, Damage를 추가 했습니다. HP = 100, Damage = 10 으로 직접 값을 넣었습니다.
BP_Monster는 구 형태의 셰이프를 추가했고 마찬가지로 HP와 Damage를 변수로 들고 있을건데 HP = 50, Damage = 8 로 설정했습니다. 

이 몬스터와 플레이어 한마리씩을 맵에 배치하겠습니다. 배치한 플레이어를 선택한 상태에서 레벨 블루프린트 창에 우클릭을하면 플레이어의 레퍼런스를 생성할수 있고 
마찬가지로 몬스터도 레퍼런스를 만들어 줬고 이것들을 변수로도 따로 저장해주겠습니다. 

여기서 키보드 1 을 누르면 플레이어가 공격하고 2를 누르면 몬스터가 공격하는 식으로 만들어볼겁니다. 

Hp를 깍는 연습은 많이 해왔습니다. 그냥 각 몬스터 플레이어의 공격력 체력을꺼내서 연산후 세팅해주는 방법도 있을겁니다. 작은 규모에서는 가능한데 
객체지향을 배웠고 좀 더 큰 규모에서도 사용할 수 있는 멤버변수 함수를 활용한 풀이를 해보겠습니다. 

BP_Monster 로 예를 들자면 새로 맴버 함수 OnDamaged라는 이름으로 만들고 인자로는 BP_Player 를 받아 Attacker 라고 이름짓겠습니다. 
여기서 몬스터의 체력과 공격자의 공격력을 뺴주고 최소한 0은 되어야 하기떄문에 Max 함수로 최소값 0을 보장한 다음 몬스터의 Hp에 Set 합니다. 
그런데 만약 인자가 유효하지 않을경우를 예외 처리도 해줄건데 is valid로 처리해주면 됩니다. 다음은 세팅된 Hp를 반환해주거나 아니면 OnDamaged 안에서 바로 텍스트를 출력해줘도 되겠습니다. 
이걸 BP_Player 쪽에도 대칭적으로 만들어 주면 됩니다.


여기서 한가지 집어볼만한 것이 위의 예시에서는 그냥 자연스럽게 데미지를 받는 함수를 피해자 입장에서 만들었습니다. 이게 처음에는 직관적이지 않을 수 있습니다. 
공격을 하는 입장에서 피해받을 객체를 인자로 받아서 처리하는것도 가능할겁니다. 피해자 입장에서 함수를 만드나 공격자 입장에서 함수를 만드나 절대적인 정답이 있는건 아니기 때문에 
처음에는 자신이 직관적으로 생각한 대로 코드를 만들어도 괜찮습니다. 
나중에 좀 더 큰 규모의 프로젝트를 하게되면 피해자입장에서의 함수가 더 낫다라는걸 알 수 있을건데 왜 그러냐면 사양에 따라 전투가 일어나면서 피격자가 받는 데미지 만큼 어그로 수치를 준다던가
아니면 누적데미지를 추적해 그에 따라 보상을 줄것이라거나 아니면 피격자의 스킬중에 일정 체력이 떨어지면 자동 발동되는 스킬이 있다거나 하는 사양이 있을 수 있습니다. 
이럴 경우 피해자 측에서 함수를 만드는게 훨씬 깔끔할것입니다. 


이번 시간의 내용이 지금까지 배운 블루프린트 클래스의 연습문제이기도 하지만 다음 시간의 빌드업이기도 합니다. 
OnDamaged함수를 대칭적으로 만드는 부분이 비효율 적이라고 느낄 수 있고 그게 맞습니다. 최대한 반복잡업을 줄이는게 더 안전하고 편리한 방법입니다. 

또 전투라는것이 지금은 마치 몬스터와 플레이어간의 전투밖에 없듯 한가지 타입의 인자만 받아주고 있는데 사양이 바뀌어 PvP가 생기거나 몬스터끼리의 전투가 생긴다면 
각 타입인자를 가진 함수들을 또 다시 만들어야 할까요?